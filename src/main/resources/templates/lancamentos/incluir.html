<!DOCTYPE html>
<html
  lang="pt"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{index}"
>
  <main layout:fragment="content">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a th:href="@{/lancamentos}">Lançamentos</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
          Novo lançamento
        </li>
      </ol>
    </nav>

    <div class="card shadow mb-4">
      <div class="card-body">
        <h2>Novo Lançamento</h2>
        <p class="mb-3 text-muted">
          Preencha o formulário para um novo lançamento.
        </p>

        <form
          action="#"
          th:action="@{/lancamentos/gravar}"
          th:object="${objeto}"
          method="post"
        >
          <div class="row">
            <div class="form-group">
              <input
                type="hidden"
                th:field="*{id}"
                class="form-control"
                id="id"
              />
            </div>

            <div class="mb-3 col-md-4 form-group">
              <label for="dataLancamento">Data do Lançamento: </label>
              <input
                type="text"
                th:field="*{dataLancamento}"
                id="dataLancamento"
                th:classappend="${#fields.hasErrors('dataLancamento')} ? 'is-invalid' : ''"
                class="form-control datePicker"
                data-mask="00/00/0000"
                th:if="${!somenteLeitura}"
                placeholder="dd/mm/aaaa"
              />
              <div
                class="invalid-feedback"
                th:if="${#fields.hasErrors('dataLancamento')}"
                th:errors="*{dataLancamento}"
              ></div>
              <input
                type="text"
                th:field="*{dataLancamento}"
                class="form-control datePicker"
                id="dataLancamento"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>

            <div class="mb-3 col-md-4">
              <label for="valor" class="form-label">Valor</label>
              <input
                type="text"
                th:field="*{valor}"
                class="form-control money bloqueado"
                th:classappend="${#fields.hasErrors('valor')} ? 'is-invalid' : ''"
                id="valor"
                placeholder="0,00"
                th:if="${!somenteLeitura}"
              />
              <div
                class="invalid-feedback"
                th:if="${#fields.hasErrors('valor')}"
                th:errors="*{valor}"
              ></div>
              <input
                type="text"
                th:field="*{valor}"
                class="form-control money"
                id="valor"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>

            <div class="mb-3 col-md-4">
              <label for="descricao" class="form-label">Descrição</label>
              <input
                type="text"
                th:field="*{descricao}"
                class="form-control"
                id="descricao"
                placeholder="Digite uma Descrição"
                th:if="${!somenteLeitura}"
              />
              <input
                type="text"
                th:field="*{descricao}"
                class="form-control"
                id="descricao"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>

            <div class="col-md-4 form-group">
              <label for="categoriaLancamento">Categoria Lançamento</label>
              <select
                class="form-control select2"
                th:classappend="${#fields.hasErrors('categoriaLancamento')} ? 'is-invalid' : ''"
                id="categoriaLancamento"
                th:field="*{categoriaLancamento}"
                th:if="${!somenteLeitura}"
              >
                <option value=""></option>
                <option
                  th:each="categoriaLancamento : ${listaCategoriaLancamento}"
                  th:value="${categoriaLancamento.id}"
                  th:text="${categoriaLancamento.descricao}"
                ></option>
              </select>
              <div
                class="invalid-feedback"
                th:if="${#fields.hasErrors('categoriaLancamento')}"
                th:errors="*{categoriaLancamento}"
              ></div>
              <input
                type="text"
                th:field="*{categoriaLancamento.descricao}"
                class="form-control"
                id="categoriaLancamento"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>

            <div class="col-md-4 form-group">
              <label for="tipoMovimentacao">Tipo Movimentação</label>
              <select
                class="form-control select2"
                th:classappend="${#fields.hasErrors('tipoMovimentacao')} ? 'is-invalid' : ''"
                id="tipoMovimentacao"
                th:field="*{tipoMovimentacao}"
                th:if="${!somenteLeitura}"
              >
                <option value=""></option>
                <option
                  th:each="tipoMovimentacao : ${listaTipoMovimentacao}"
                  th:value="${tipoMovimentacao.id}"
                  th:text="${tipoMovimentacao.descricao}"
                ></option>
              </select>
              <div
                class="invalid-feedback"
                th:if="${#fields.hasErrors('tipoMovimentacao')}"
                th:errors="*{tipoMovimentacao}"
              ></div>
              <input
                type="text"
                th:field="*{tipoMovimentacao.descricao}"
                class="form-control"
                id="tipoMovimentacao"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>

            <div class="col-md-4 form-group">
              <label for="fundoFinanceiro">Fundo Financeiro</label>
              <select
                class="form-control select2"
                th:classappend="${#fields.hasErrors('fundoFinanceiro')} ? 'is-invalid' : ''"
                id="fundoFinanceiro"
                th:field="*{fundoFinanceiro}"
                th:if="${!somenteLeitura}"
              >
                <option value=""></option>
                <option
                  th:each="fundoFinanceiro : ${listaFundoFinanceiro}"
                  th:value="${fundoFinanceiro.id}"
                  th:text="${fundoFinanceiro.descricao}"
                ></option>
              </select>
              <div
                class="invalid-feedback"
                th:if="${#fields.hasErrors('fundoFinanceiro')}"
                th:errors="*{fundoFinanceiro}"
              ></div>
              <input
                type="text"
                th:field="*{fundoFinanceiro.descricao}"
                class="form-control"
                id="fundoFinanceiro"
                th:if="${somenteLeitura}"
                disabled
              />
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <button
                type="submit"
                class="btn btn-primary"
                th:if="${!somenteLeitura}"
              >
                Gravar
              </button>
              <a
                class="btn btn-secondary ml-3"
                type="button"
                th:href="@{/lancamentos}"
                >Cancelar</a
              >
            </div>
          </div>
        </form>
      </div>
    </div>
  </main>
</html>
